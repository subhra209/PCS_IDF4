/*
*------------------------------------------------------------------------------
* Include Files
*------------------------------------------------------------------------------
*/

#include "config.h"
#include "digit_driver.h"


/*
*------------------------------------------------------------------------------
* Private Defines
*------------------------------------------------------------------------------
*/

/*
*------------------------------------------------------------------------------
* Private Macros
*------------------------------------------------------------------------------
*/


/*
*------------------------------------------------------------------------------
* Private Data Types
*------------------------------------------------------------------------------
*/

/*
*------------------------------------------------------------------------------
* Public Variables
*------------------------------------------------------------------------------
*/




/*
*------------------------------------------------------------------------------
* Private Variables (static)
*------------------------------------------------------------------------------
*/


/*
*------------------------------------------------------------------------------
* Public Constants
*------------------------------------------------------------------------------
*/

/*
*------------------------------------------------------------------------------
* Private Constants (static)
* ------------------------------------------------------------------------------
*/

UINT8 LED_MAP[11] = {0xbf,0x86,0xdb,0xcf,0xe6,0xed,0xfd,0x87,0xff,0xef,0x00};

/*
*------------------------------------------------------------------------------
* Private Function Prototypes (static)
*------------------------------------------------------------------------------
*/

/*
*------------------------------------------------------------------------------
* Private Functions
*------------------------------------------------------------------------------
*/

/*
*------------------------------------------------------------------------------
* void DDR_loadDigit(UINT8 digit, UINT8 data)
*
* Summary	: Write one byte data on the bus
*
* Input		: UINT8 digit - digit number to write the data
*			  UINT8 dataByte - data byte for the digit
*
* Output	: None
*------------------------------------------------------------------------------
*/
void DDR_loadDigit(UINT8 digit, UINT8 data)
{
/*
	if( digit >=64 )
	{
		digit+=128;
	}
*/
	DISABLE_TMR1_INTERRUPT();
	DISPLAY_CONTROL = DISPLAY_DISABLE;	//disable the display
	DIGIT_PORT = digit;					//set the address
	DATA_PORT = (~LED_MAP[data]) | 0X80;  // write data
	DISPLAY_CONTROL = DISPLAY_ENABLE;	//enable the display
	Delay10us(50);						//delay for the data to stabilize
	DISPLAY_CONTROL = DISPLAY_DISABLE;	//disable it again
	ENABLE_TMR1_INTERRUPT();
}
/*
*  End of digit_driver.c
*/